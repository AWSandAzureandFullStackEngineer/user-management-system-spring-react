import{r as d,j as e,u as j}from"./index-jpwqvs6n.js";import{c as v}from"./userService-C18VFg9C.js";const C=({onSubmit:l,isLoading:t=!1,error:m=null,initialData:r,submitButtonText:u="Create User",isEditMode:s=!1})=>{const[n,c]=d.useState((r==null?void 0:r.username)||""),[o,g]=d.useState((r==null?void 0:r.email)||""),[b,x]=d.useState(""),[y,h]=d.useState((r==null?void 0:r.firstName)||""),[p,i]=d.useState((r==null?void 0:r.lastName)||""),[k,f]=d.useState((r==null?void 0:r.phoneNumber)||"");d.useEffect(()=>{r?(c(r.username||""),g(r.email||""),x(""),h(r.firstName||""),i(r.lastName||""),f(r.phoneNumber||"")):s||(c(""),g(""),x(""),h(""),i(""),f(""))},[r,s]);const w=a=>{if(a.preventDefault(),t)return;const N={username:n,email:o,firstName:y||void 0,lastName:p||void 0,phoneNumber:k||void 0};(!s||s&&b)&&(N.password=b),l(N)};return e.jsxs("form",{onSubmit:w,className:"space-y-6 p-4 md:p-6 bg-white dark:bg-gray-800 shadow-xl rounded-lg max-w-lg mx-auto","aria-labelledby":"user-form-title",children:[e.jsx("h2",{id:"user-form-title",className:"text-xl font-semibold text-gray-900 dark:text-white sr-only",children:s?"Edit User Form":"Create User Form"}),m&&e.jsxs("div",{role:"alert",className:"p-4 text-sm text-red-700 bg-red-100 rounded-lg dark:bg-red-200 dark:text-red-800","aria-live":"assertive",children:[e.jsx("span",{className:"font-medium",children:"Error:"})," ",m]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"username",name:"username",value:n,onChange:a=>c(a.target.value),required:!0,minLength:3,maxLength:100,disabled:t||s&&!!(r!=null&&r.username),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-600 dark:disabled:text-gray-400","aria-describedby":"username-help",autoComplete:"username"}),e.jsxs("p",{id:"username-help",className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:["Must be unique, 3-100 characters. ",s&&!!(r!=null&&r.username)&&"(Cannot be changed)"]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",id:"email",name:"email",value:o,onChange:a=>g(a.target.value),required:!0,maxLength:150,disabled:t,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-600",autoComplete:"email"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Password ",s?"(Leave blank to keep current)":e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",id:"password",name:"password",value:b,onChange:a=>x(a.target.value),required:!s,minLength:8,disabled:t,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-600","aria-describedby":"password-help",autoComplete:s?"new-password":"current-password"}),e.jsx("p",{id:"password-help",className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Minimum 8 characters."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"First Name"}),e.jsx("input",{type:"text",id:"firstName",name:"firstName",value:y,onChange:a=>h(a.target.value),maxLength:50,disabled:t,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-600",autoComplete:"given-name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",id:"lastName",name:"lastName",value:p,onChange:a=>i(a.target.value),maxLength:50,disabled:t,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-600",autoComplete:"family-name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:k,onChange:a=>f(a.target.value),maxLength:20,disabled:t,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-600",autoComplete:"tel"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:t,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400 dark:disabled:bg-indigo-500 disabled:cursor-not-allowed transition-colors duration-150",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s?"Saving...":"Creating..."]}):u})})]})},S=()=>{const[l,t]=d.useState(!1),[m,r]=d.useState(null),[u,s]=d.useState(!1);return{createUser:async c=>{t(!0),r(null),s(!1);try{const o=await v(c);return s(!0),t(!1),o}catch(o){const g=o instanceof Error?o.message:"An unknown error occurred during user creation.";return r(g),t(!1),s(!1),null}},isLoading:l,error:m,success:u}},P=()=>{const{createUser:l,isLoading:t,error:m}=S(),r=j(),u=async s=>{const n=await l(s);n&&(alert(`User "${n.username}" created successfully!`),r("/users"))};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"#111827",color:"white",padding:"1rem"},children:[e.jsx("h1",{style:{textAlign:"center",fontSize:"2rem",fontWeight:600,marginBottom:"2rem"},children:"Create New User"}),e.jsx("div",{style:{width:"100%",maxWidth:"32rem"},children:e.jsx(C,{onSubmit:u,isLoading:t,error:m,submitButtonText:"Create User",isEditMode:!1})})]})};export{P as default};
